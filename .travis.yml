before_install:
    - sudo add-apt-repository -y "deb http://archive.ubuntu.com/ubuntu/ trusty main universe"
    - sudo apt-get update -qq
install:
    - echo ${TRAVIS_COMMIT}
    - echo ${TRAVIS_BRANCH}
    - echo ${TRAVIS_TAG}
    - git describe --long --tags 2>/dev/null | sed 's/\([^-]*-g\)/r\1/;s/-/./g'
    - sudo apt-get install -qq gcc g++ build-essential
    - sudo apt-get install -qq sqlite
    - sudo apt-get install -qq libkyotocabinet-dev
    - sudo pip install virtualenv
    - virtualenv venv
    - venv/bin/pip install -r requirements.txt
    - venv/bin/pip install coveralls
python:
    - 2.7
script:
    - venv/bin/coverage run -m unittest discover -v
after_success:
    - venv/bin/coveralls
